{"ast":null,"code":"var _jsxFileName = \"E:\\\\todo-app\\\\client\\\\src\\\\components\\\\TodoDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport InAppNotifications from './InAppNotifications';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PRIORITIES = ['Low', 'Medium', 'High'];\nconst STATUSES = ['In Progress', 'Completed', 'Timed Out'];\nexport default function TodoDashboard({\n  user,\n  onLogout\n}) {\n  _s();\n  var _tasks$find, _tasks$find$owner;\n  const [tasks, setTasks] = useState([]);\n  const [form, setForm] = useState({\n    title: '',\n    description: '',\n    dueDate: '',\n    priority: 'Low',\n    status: 'In Progress',\n    collaborators: '' // comma-separated emails\n  });\n  const [editingId, setEditingId] = useState(null);\n  const [error, setError] = useState('');\n  const [showCreate, setShowCreate] = useState(false); // NEW STATE\n  const [showProfileMenu, setShowProfileMenu] = useState(false);\n  const [collaboratorFields, setCollaboratorFields] = useState([]); // [{email, canEdit}]\n  const socketRef = useRef(null);\n  const tableRef = useRef(null);\n  const createFormRef = useRef(null);\n\n  // Fetch tasks\n  const fetchTasks = () => {\n    fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/tasks`, {\n      credentials: 'include'\n    }).then(res => res.json()).then(setTasks);\n  };\n  useEffect(() => {\n    fetchTasks();\n    // Setup socket.io\n    socketRef.current = io(process.env.REACT_APP_API_URL || 'http://localhost:5000', {\n      withCredentials: true\n    });\n    socketRef.current.emit('join', user._id);\n    socketRef.current.on('task-updated', () => {\n      fetchTasks();\n    });\n    // Listen for real-time task deletion\n    socketRef.current.on('task-deleted', ({\n      taskId\n    }) => {\n      setTasks(tasks => tasks.filter(t => t._id !== taskId));\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [user._id]);\n\n  // Handle form input\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Handle collaborator field changes\n  const handleCollaboratorChange = (idx, field, value) => {\n    setCollaboratorFields(fields => fields.map((c, i) => i === idx ? {\n      ...c,\n      [field]: value\n    } : c));\n  };\n\n  // Add a new collaborator field\n  const addCollaboratorField = () => {\n    setCollaboratorFields(fields => [...fields, {\n      email: '',\n      canEdit: false\n    }]);\n  };\n\n  // Remove a collaborator field\n  const removeCollaboratorField = idx => {\n    setCollaboratorFields(fields => fields.filter((_, i) => i !== idx));\n  };\n\n  // Create or update task\n  const handleSubmit = async e => {\n    var _task$owner;\n    e.preventDefault();\n    setError('');\n    // Only owner can manage collaborators\n    let collaborators = [];\n    if (collaboratorFields.length) {\n      // Validate emails\n      const emails = collaboratorFields.map(c => c.email.trim()).filter(Boolean);\n      if (emails.length !== collaboratorFields.length) {\n        setError('Please enter all collaborator emails.');\n        return;\n      }\n      // Fetch user IDs for emails\n      const res = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/users/by-emails`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          emails\n        })\n      });\n      const data = await res.json();\n      if (!Array.isArray(data) || data.length !== emails.length) {\n        setError('Some collaborator emails are invalid.');\n        return;\n      }\n      // Map canEdit to user IDs\n      collaborators = collaboratorFields.map((c, i) => ({\n        user: data[i]._id,\n        canEdit: c.canEdit\n      }));\n    }\n    // Prevent sending undefined collaborators if field is empty\n    let payload = {\n      ...form\n    };\n    // Remove dueDate if empty string\n    if (!payload.dueDate) {\n      delete payload.dueDate;\n    }\n    // Only owner can send collaborators field\n    const task = editingId ? tasks.find(t => t._id === editingId) : null;\n    const isOwner = task ? ((_task$owner = task.owner) === null || _task$owner === void 0 ? void 0 : _task$owner.email) === user.email : true;\n    if (isOwner) {\n      payload.collaborators = collaborators;\n    } else {\n      // If user is a collaborator, do not send collaborators field at all\n      delete payload.collaborators;\n    }\n    const url = `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/tasks${editingId ? `/${editingId}` : ''}`;\n    const method = editingId ? 'PUT' : 'POST';\n    const res = await fetch(url, {\n      method,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      body: JSON.stringify(payload)\n    });\n    if (!res.ok) {\n      let msg = `Failed to save task (HTTP ${res.status})`;\n      try {\n        const err = await res.json();\n        if (err && err.errors) {\n          msg = err.errors.map(e => e.msg).join(', ');\n        } else if (err && err.message) {\n          msg = err.message;\n        }\n      } catch (e) {\n        // If not JSON, show raw text\n        try {\n          const text = await res.text();\n          if (text) msg += `: ${text}`;\n        } catch {}\n      }\n      setError(msg);\n      return;\n    }\n    setForm({\n      title: '',\n      description: '',\n      dueDate: '',\n      priority: 'Low',\n      status: 'In Progress',\n      collaborators: ''\n    });\n    setCollaboratorFields([]);\n    setEditingId(null);\n    setShowCreate(false); // HIDE FORM AFTER ADD/UPDATE\n    // Notify collaborators in real-time\n    const updatedTask = await res.json();\n    socketRef.current.emit('task-updated', updatedTask);\n    fetchTasks();\n    // Scroll back to table after update\n    setTimeout(() => {\n      if (tableRef.current) {\n        tableRef.current.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center'\n        });\n      }\n    }, 100);\n  };\n\n  // Edit task\n  const handleEdit = task => {\n    setEditingId(task._id);\n    setForm({\n      title: task.title,\n      description: task.description,\n      dueDate: task.dueDate ? task.dueDate.slice(0, 10) : '',\n      priority: task.priority,\n      status: task.status,\n      collaborators: '' // not used anymore\n    });\n    setCollaboratorFields((task.collaborators || []).filter(c => c.user && c.user.email && c.user.email !== user.email).map(c => ({\n      email: c.user.email,\n      canEdit: c.canEdit || false\n    })));\n    setShowCreate(true);\n    // Scroll to create form after a short delay\n    setTimeout(() => {\n      if (createFormRef.current) {\n        createFormRef.current.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center'\n        });\n      }\n    }, 100);\n  };\n\n  // Delete task\n  const handleDelete = async id => {\n    await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/tasks/${id}`, {\n      method: 'DELETE',\n      credentials: 'include'\n    });\n    socketRef.current.emit('task-updated', {\n      owner: user._id,\n      collaborators: []\n    });\n    setTasks(tasks.filter(t => t._id !== id));\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(InAppNotifications, {\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-8 relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed top-4 right-4 z-50 flex flex-col items-end\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-12 h-12 rounded-full bg-calm3 text-calm5 font-bold text-xl flex items-center justify-center shadow hover:bg-calm2 focus:outline-none border-2 border-calm5\",\n          onClick: () => setShowProfileMenu(v => !v),\n          style: {\n            transition: 'background 0.2s'\n          },\n          \"aria-label\": \"User menu\",\n          type: \"button\",\n          children: user.name ? user.name[0].toUpperCase() : user.email[0].toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), showProfileMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 bg-white rounded-lg shadow-lg p-4 z-50 min-w-[200px] border border-calm3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold text-calm5\",\n              children: \"Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"text-calm5 hover:text-red-500 text-lg font-bold\",\n              onClick: () => setShowProfileMenu(false),\n              \"aria-label\": \"Close\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 37\n            }, this), \" \", user.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 37\n            }, this), \" \", user.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onLogout,\n            className: \"w-full py-1 rounded bg-calm2 text-calm5 font-semibold hover:bg-calm3 transition\",\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-4xl font-bold text-calm5 text-center\",\n          children: user.name ? `${user.name.split(' ')[0]}'s To-Do Dashboard` : 'To-Do Dashboard'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), !showCreate && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"block mx-auto mb-4 px-8 py-4 rounded bg-calm3 text-calm5 font-semibold hover:bg-calm2 transition text-[1.25rem]\",\n        onClick: () => {\n          setShowCreate(true);\n          setEditingId(null);\n          setForm({\n            title: '',\n            description: '',\n            dueDate: '',\n            priority: 'Low',\n            status: 'In Progress',\n            collaborators: ''\n          });\n          setCollaboratorFields([]);\n        },\n        children: \"Create Mission\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), showCreate && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center w-full\",\n        ref: createFormRef,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"bg-white/90 rounded-xl shadow p-4 space-y-4 relative w-full max-w-2xl\",\n          style: {\n            minWidth: '0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"absolute top-2 right-2 text-calm5 hover:text-red-500 text-xl font-bold focus:outline-none\",\n            onClick: () => {\n              setShowCreate(false);\n              setEditingId(null);\n              setCollaboratorFields([]);\n            },\n            \"aria-label\": \"Close\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold text-calm5 mb-2\",\n            children: editingId ? 'Edit Mission' : 'Create Mission'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"title\",\n              value: form.title,\n              onChange: handleChange,\n              required: true,\n              placeholder: \"Task Name\",\n              className: \"p-2 rounded border\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"dueDate\",\n              value: form.dueDate,\n              onChange: handleChange,\n              type: \"date\",\n              className: \"p-2 rounded border\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: form.description,\n            onChange: handleChange,\n            placeholder: \"Description\",\n            className: \"p-2 rounded border w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"priority\",\n              value: form.priority,\n              onChange: handleChange,\n              className: \"p-2 rounded border\",\n              required: true,\n              children: PRIORITIES.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                children: p\n              }, p, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 40\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"status\",\n              value: form.status,\n              onChange: handleChange,\n              className: \"p-2 rounded border\",\n              children: STATUSES.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                children: s\n              }, s, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 38\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this), (!editingId || ((_tasks$find = tasks.find(t => t._id === editingId)) === null || _tasks$find === void 0 ? void 0 : (_tasks$find$owner = _tasks$find.owner) === null || _tasks$find$owner === void 0 ? void 0 : _tasks$find$owner.email) === user.email) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold text-calm5\",\n              children: \"Collaborators\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 19\n            }, this), collaboratorFields.map((c, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                placeholder: \"Collaborator Email\",\n                value: c.email,\n                onChange: e => handleCollaboratorChange(idx, 'email', e.target.value),\n                className: \"p-2 rounded border flex-1\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"flex items-center gap-1 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: c.canEdit,\n                  onChange: e => handleCollaboratorChange(idx, 'canEdit', e.target.checked)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 25\n                }, this), \"Allow Edit\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => removeCollaboratorField(idx),\n                className: \"text-red-500 font-bold text-lg\",\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 23\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 21\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: addCollaboratorField,\n              className: \"px-3 py-1 rounded bg-calm2 text-calm5 font-semibold hover:bg-calm3 transition text-sm\",\n              children: \"Add Collaborator\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-red-500 text-sm\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-full py-2 rounded bg-calm3 text-calm5 font-semibold hover:bg-calm2 transition\",\n            children: editingId ? 'Update Task' : 'Add Task'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this)]\n        }, editingId || 'create', true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center w-full\",\n        ref: tableRef,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4 w-full max-w-2xl mx-auto\",\n          style: {\n            minWidth: '0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-2xl font-bold text-calm5 mb-2\",\n            children: \"List of Missions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), tasks.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-calm5 text-center text-xs\",\n            children: \"No tasks yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 36\n          }, this), tasks.map(task => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/80 rounded-lg shadow p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-bold text-calm5 text-base\",\n                children: task.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this), task.description && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-calm5 text-sm mb-1 whitespace-pre-line\",\n                children: task.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-calm5 text-sm\",\n                children: /* was text-xs, now text-sm */\n                `Due: ${task.dueDate ? new Date(task.dueDate).toLocaleDateString() : 'N/A'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 19\n              }, this), task.dueDate && new Date(task.dueDate) < new Date() && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 font-semibold text-[#c0392b] text-sm\",\n                children: [\"(Overdue by \", Math.ceil((new Date() - new Date(task.dueDate)) / (1000 * 60 * 60 * 24)), \" day\", Math.ceil((new Date() - new Date(task.dueDate)) / (1000 * 60 * 60 * 24)) > 1 ? 's' : '', \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 21\n              }, this), task.dueDate && new Date(task.dueDate) >= new Date() && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 font-semibold text-[#27ae60] text-sm\",\n                children: [\"(\", Math.ceil((new Date(task.dueDate) - new Date()) / (1000 * 60 * 60 * 24)), \" day\", Math.ceil((new Date(task.dueDate) - new Date()) / (1000 * 60 * 60 * 24)) > 1 ? 's' : '', \" left)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm mt-1\",\n                children: [\"Priority: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: task.priority\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 31\n                }, this), \" | Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: (() => {\n                    if (task.dueDate && new Date(task.dueDate) < new Date()) return 'font-semibold text-[#c0392b]';\n                    if (task.status === 'Completed') return 'font-semibold text-[#27ae60]';\n                    if (task.status === 'In Progress') return 'font-semibold text-[#f39c12]';\n                    return 'font-semibold text-calm5';\n                  })(),\n                  children: task.dueDate && new Date(task.dueDate) < new Date() ? 'Timed Out' : task.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 96\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 19\n              }, this), (() => {\n                let collabText = '';\n                if (task.owner && task.owner.email === user.email) {\n                  collabText = (task.collaborators || []).filter(c => c.user && c.user.email !== user.email).map(c => c.user.email + (c.canEdit ? ' (can edit)' : '')).join(', ');\n                } else if (task.owner && task.owner.email) {\n                  collabText = task.owner.email;\n                }\n                if (collabText) {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-calm5 text-sm mt-1\",\n                    children: [\"Collaborators: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-semibold\",\n                      children: collabText\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 42\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 25\n                  }, this);\n                }\n                return null;\n              })()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-row gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleEdit(task),\n                className: \"px-1 py-2 rounded bg-calm2 text-calm5 font-semibold hover:bg-calm3 transition text-sm\",\n                children: \"Edit Mission\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelete(task._id),\n                className: \"px-1 py-2 rounded bg-red-500 text-white font-semibold hover:bg-red-400 transition text-sm\",\n                children: \"Delete Mission\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this)]\n          }, task._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(TodoDashboard, \"wgtIOlrYkmEP1A5TmIcZELevwQU=\");\n_c = TodoDashboard;\nvar _c;\n$RefreshReg$(_c, \"TodoDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useRef","io","InAppNotifications","jsxDEV","_jsxDEV","Fragment","_Fragment","PRIORITIES","STATUSES","TodoDashboard","user","onLogout","_s","_tasks$find","_tasks$find$owner","tasks","setTasks","form","setForm","title","description","dueDate","priority","status","collaborators","editingId","setEditingId","error","setError","showCreate","setShowCreate","showProfileMenu","setShowProfileMenu","collaboratorFields","setCollaboratorFields","socketRef","tableRef","createFormRef","fetchTasks","fetch","process","env","REACT_APP_API_URL","credentials","then","res","json","current","withCredentials","emit","_id","on","taskId","filter","t","disconnect","handleChange","e","target","name","value","handleCollaboratorChange","idx","field","fields","map","c","i","addCollaboratorField","email","canEdit","removeCollaboratorField","_","handleSubmit","_task$owner","preventDefault","length","emails","trim","Boolean","method","headers","body","JSON","stringify","data","Array","isArray","payload","task","find","isOwner","owner","url","ok","msg","err","errors","join","message","text","updatedTask","setTimeout","scrollIntoView","behavior","block","handleEdit","slice","handleDelete","id","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","v","style","transition","type","toUpperCase","split","ref","onSubmit","minWidth","onChange","required","placeholder","p","s","checked","Date","toLocaleDateString","Math","ceil","collabText","_c","$RefreshReg$"],"sources":["E:/todo-app/client/src/components/TodoDashboard.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport InAppNotifications from './InAppNotifications';\r\n\r\nconst PRIORITIES = ['Low', 'Medium', 'High'];\r\nconst STATUSES = ['In Progress', 'Completed', 'Timed Out'];\r\n\r\nexport default function TodoDashboard({ user, onLogout }) {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [form, setForm] = useState({\r\n    title: '',\r\n    description: '',\r\n    dueDate: '',\r\n    priority: 'Low',\r\n    status: 'In Progress',\r\n    collaborators: '', // comma-separated emails\r\n  });\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [showCreate, setShowCreate] = useState(false); // NEW STATE\r\n  const [showProfileMenu, setShowProfileMenu] = useState(false);\r\n  const [collaboratorFields, setCollaboratorFields] = useState([]); // [{email, canEdit}]\r\n  const socketRef = useRef(null);\r\n  const tableRef = useRef(null);\r\n  const createFormRef = useRef(null);\r\n\r\n  // Fetch tasks\r\n  const fetchTasks = () => {\r\n    fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/tasks`, {\r\n      credentials: 'include',\r\n    })\r\n      .then(res => res.json())\r\n      .then(setTasks);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTasks();\r\n    // Setup socket.io\r\n    socketRef.current = io(process.env.REACT_APP_API_URL || 'http://localhost:5000', {\r\n      withCredentials: true\r\n    });\r\n    socketRef.current.emit('join', user._id);\r\n    socketRef.current.on('task-updated', () => {\r\n      fetchTasks();\r\n    });\r\n    // Listen for real-time task deletion\r\n    socketRef.current.on('task-deleted', ({ taskId }) => {\r\n      setTasks(tasks => tasks.filter(t => t._id !== taskId));\r\n    });\r\n    return () => {\r\n      socketRef.current.disconnect();\r\n    };\r\n  }, [user._id]);\r\n\r\n  // Handle form input\r\n  const handleChange = e => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // Handle collaborator field changes\r\n  const handleCollaboratorChange = (idx, field, value) => {\r\n    setCollaboratorFields(fields => fields.map((c, i) => i === idx ? { ...c, [field]: value } : c));\r\n  };\r\n\r\n  // Add a new collaborator field\r\n  const addCollaboratorField = () => {\r\n    setCollaboratorFields(fields => [...fields, { email: '', canEdit: false }]);\r\n  };\r\n\r\n  // Remove a collaborator field\r\n  const removeCollaboratorField = idx => {\r\n    setCollaboratorFields(fields => fields.filter((_, i) => i !== idx));\r\n  };\r\n\r\n  // Create or update task\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setError('');\r\n    // Only owner can manage collaborators\r\n    let collaborators = [];\r\n    if (collaboratorFields.length) {\r\n      // Validate emails\r\n      const emails = collaboratorFields.map(c => c.email.trim()).filter(Boolean);\r\n      if (emails.length !== collaboratorFields.length) {\r\n        setError('Please enter all collaborator emails.');\r\n        return;\r\n      }\r\n      // Fetch user IDs for emails\r\n      const res = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/users/by-emails`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n        body: JSON.stringify({ emails })\r\n      });\r\n      const data = await res.json();\r\n      if (!Array.isArray(data) || data.length !== emails.length) {\r\n        setError('Some collaborator emails are invalid.');\r\n        return;\r\n      }\r\n      // Map canEdit to user IDs\r\n      collaborators = collaboratorFields.map((c, i) => ({ user: data[i]._id, canEdit: c.canEdit }));\r\n    }\r\n    // Prevent sending undefined collaborators if field is empty\r\n    let payload = {\r\n      ...form\r\n    };\r\n    // Remove dueDate if empty string\r\n    if (!payload.dueDate) {\r\n      delete payload.dueDate;\r\n    }\r\n    // Only owner can send collaborators field\r\n    const task = editingId ? tasks.find(t => t._id === editingId) : null;\r\n    const isOwner = task ? (task.owner?.email === user.email) : true;\r\n    if (isOwner) {\r\n      payload.collaborators = collaborators;\r\n    } else {\r\n      // If user is a collaborator, do not send collaborators field at all\r\n      delete payload.collaborators;\r\n    }\r\n    const url = `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/tasks${editingId ? `/${editingId}` : ''}`;\r\n    const method = editingId ? 'PUT' : 'POST';\r\n    const res = await fetch(url, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include',\r\n      body: JSON.stringify(payload)\r\n    });\r\n    if (!res.ok) {\r\n      let msg = `Failed to save task (HTTP ${res.status})`;\r\n      try {\r\n        const err = await res.json();\r\n        if (err && err.errors) {\r\n          msg = err.errors.map(e => e.msg).join(', ');\r\n        } else if (err && err.message) {\r\n          msg = err.message;\r\n        }\r\n      } catch (e) {\r\n        // If not JSON, show raw text\r\n        try {\r\n          const text = await res.text();\r\n          if (text) msg += `: ${text}`;\r\n        } catch {}\r\n      }\r\n      setError(msg);\r\n      return;\r\n    }\r\n    setForm({ title: '', description: '', dueDate: '', priority: 'Low', status: 'In Progress', collaborators: '' });\r\n    setCollaboratorFields([]);\r\n    setEditingId(null);\r\n    setShowCreate(false); // HIDE FORM AFTER ADD/UPDATE\r\n    // Notify collaborators in real-time\r\n    const updatedTask = await res.json();\r\n    socketRef.current.emit('task-updated', updatedTask);\r\n    fetchTasks();\r\n    // Scroll back to table after update\r\n    setTimeout(() => {\r\n      if (tableRef.current) {\r\n        tableRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      }\r\n    }, 100);\r\n  };\r\n\r\n  // Edit task\r\n  const handleEdit = task => {\r\n    setEditingId(task._id);\r\n    setForm({\r\n      title: task.title,\r\n      description: task.description,\r\n      dueDate: task.dueDate ? task.dueDate.slice(0, 10) : '',\r\n      priority: task.priority,\r\n      status: task.status,\r\n      collaborators: '', // not used anymore\r\n    });\r\n    setCollaboratorFields(\r\n      (task.collaborators || [])\r\n        .filter(c => c.user && c.user.email && c.user.email !== user.email)\r\n        .map(c => ({ email: c.user.email, canEdit: c.canEdit || false }))\r\n    );\r\n    setShowCreate(true);\r\n    // Scroll to create form after a short delay\r\n    setTimeout(() => {\r\n      if (createFormRef.current) {\r\n        createFormRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      }\r\n    }, 100);\r\n  };\r\n\r\n  // Delete task\r\n  const handleDelete = async id => {\r\n    await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/tasks/${id}`, {\r\n      method: 'DELETE',\r\n      credentials: 'include',\r\n    });\r\n    socketRef.current.emit('task-updated', { owner: user._id, collaborators: [] });\r\n    setTasks(tasks.filter(t => t._id !== id));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <InAppNotifications user={user} />\r\n      <div className=\"space-y-8 relative\">\r\n        {/* User Logo in Top Right */}\r\n        <div className=\"fixed top-4 right-4 z-50 flex flex-col items-end\">\r\n          <button\r\n            className=\"w-12 h-12 rounded-full bg-calm3 text-calm5 font-bold text-xl flex items-center justify-center shadow hover:bg-calm2 focus:outline-none border-2 border-calm5\"\r\n            onClick={() => setShowProfileMenu(v => !v)}\r\n            style={{ transition: 'background 0.2s' }}\r\n            aria-label=\"User menu\"\r\n            type=\"button\"\r\n          >\r\n            {user.name ? user.name[0].toUpperCase() : user.email[0].toUpperCase()}\r\n          </button>\r\n          {showProfileMenu && (\r\n            <div className=\"mt-2 bg-white rounded-lg shadow-lg p-4 z-50 min-w-[200px] border border-calm3\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <span className=\"font-bold text-calm5\">Profile</span>\r\n                <button className=\"text-calm5 hover:text-red-500 text-lg font-bold\" onClick={() => setShowProfileMenu(false)} aria-label=\"Close\">&times;</button>\r\n              </div>\r\n              <div className=\"mb-1\"><span className=\"font-semibold\">Name:</span> {user.name}</div>\r\n              <div className=\"mb-3\"><span className=\"font-semibold\">Email:</span> {user.email}</div>\r\n              <button onClick={onLogout} className=\"w-full py-1 rounded bg-calm2 text-calm5 font-semibold hover:bg-calm3 transition\">Logout</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* Dashboard Title */}\r\n        <div className=\"flex flex-col items-center justify-center\">\r\n          <h2 className=\"text-4xl font-bold text-calm5 text-center\">\r\n            {user.name ? `${user.name.split(' ')[0]}'s To-Do Dashboard` : 'To-Do Dashboard'}\r\n          </h2>\r\n        </div>\r\n        {/* Create Mission Button (should be above the table heading) */}\r\n        {!showCreate && (\r\n          <button\r\n            className=\"block mx-auto mb-4 px-8 py-4 rounded bg-calm3 text-calm5 font-semibold hover:bg-calm2 transition text-[1.25rem]\"\r\n            onClick={() => {\r\n              setShowCreate(true);\r\n              setEditingId(null);\r\n              setForm({ title: '', description: '', dueDate: '', priority: 'Low', status: 'In Progress', collaborators: '' });\r\n              setCollaboratorFields([]);\r\n            }}\r\n          >\r\n            Create Mission\r\n          </button>\r\n        )}\r\n        {/* Show Create Mission Form when showCreate is true */}\r\n        {showCreate && (\r\n          <div className=\"flex justify-center w-full\" ref={createFormRef}>\r\n            <form\r\n              onSubmit={handleSubmit}\r\n              className=\"bg-white/90 rounded-xl shadow p-4 space-y-4 relative w-full max-w-2xl\"\r\n              style={{ minWidth: '0' }}\r\n              key={editingId || 'create'} // This will force remount/clear on edit/create toggle\r\n            >\r\n              <button\r\n                type=\"button\"\r\n                className=\"absolute top-2 right-2 text-calm5 hover:text-red-500 text-xl font-bold focus:outline-none\"\r\n                onClick={() => { setShowCreate(false); setEditingId(null); setCollaboratorFields([]); }}\r\n                aria-label=\"Close\"\r\n              >\r\n                &times;\r\n              </button>\r\n              <h3 className=\"text-lg font-bold text-calm5 mb-2\">{editingId ? 'Edit Mission' : 'Create Mission'}</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <input name=\"title\" value={form.title} onChange={handleChange} required placeholder=\"Task Name\" className=\"p-2 rounded border\" />\r\n                <input name=\"dueDate\" value={form.dueDate} onChange={handleChange} type=\"date\" className=\"p-2 rounded border\" required />\r\n              </div>\r\n              <textarea name=\"description\" value={form.description} onChange={handleChange} placeholder=\"Description\" className=\"p-2 rounded border w-full\" />\r\n              <div className=\"flex gap-4\">\r\n                <select name=\"priority\" value={form.priority} onChange={handleChange} className=\"p-2 rounded border\" required>\r\n                  {PRIORITIES.map(p => <option key={p}>{p}</option>)}\r\n                </select>\r\n                <select name=\"status\" value={form.status} onChange={handleChange} className=\"p-2 rounded border\">\r\n                  {STATUSES.map(s => <option key={s}>{s}</option>)}\r\n                </select>\r\n              </div>\r\n              {/* Collaborator management, only for owner */}\r\n              {(!editingId || (tasks.find(t => t._id === editingId)?.owner?.email === user.email)) && (\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"font-semibold text-calm5\">Collaborators</div>\r\n                  {collaboratorFields.map((c, idx) => (\r\n                    <div key={idx} className=\"flex items-center gap-2\">\r\n                      <input\r\n                        type=\"email\"\r\n                        placeholder=\"Collaborator Email\"\r\n                        value={c.email}\r\n                        onChange={e => handleCollaboratorChange(idx, 'email', e.target.value)}\r\n                        className=\"p-2 rounded border flex-1\"\r\n                        required\r\n                      />\r\n                      <label className=\"flex items-center gap-1 text-sm\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={c.canEdit}\r\n                          onChange={e => handleCollaboratorChange(idx, 'canEdit', e.target.checked)}\r\n                        />\r\n                        Allow Edit\r\n                      </label>\r\n                      <button type=\"button\" onClick={() => removeCollaboratorField(idx)} className=\"text-red-500 font-bold text-lg\">&times;</button>\r\n                    </div>\r\n                  ))}\r\n                  <button type=\"button\" onClick={addCollaboratorField} className=\"px-3 py-1 rounded bg-calm2 text-calm5 font-semibold hover:bg-calm3 transition text-sm\">Add Collaborator</button>\r\n                </div>\r\n              )}\r\n              {error && <div className=\"text-red-500 text-sm\">{error}</div>}\r\n              <button className=\"w-full py-2 rounded bg-calm3 text-calm5 font-semibold hover:bg-calm2 transition\">\r\n                {editingId ? 'Update Task' : 'Add Task'}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        )}\r\n        {/* Table Heading: half the dashboard title size (text-2xl) */}\r\n        <div className=\"flex justify-center w-full\" ref={tableRef}>\r\n          <div className=\"space-y-4 w-full max-w-2xl mx-auto\" style={{minWidth: '0'}}>\r\n            <h3 className=\"text-2xl font-bold text-calm5 mb-2\">List of Missions</h3>\r\n            {tasks.length === 0 && <div className=\"text-calm5 text-center text-xs\">No tasks yet.</div>}\r\n            {tasks.map(task => (\r\n              <div key={task._id} className=\"bg-white/80 rounded-lg shadow p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-2\">\r\n                <div>\r\n                  <div className=\"font-bold text-calm5 text-base\">{task.title}</div>\r\n                  {/* Show description if present */}\r\n                  {task.description && (\r\n                    <div className=\"text-calm5 text-sm mb-1 whitespace-pre-line\">{task.description}</div>\r\n                  )}\r\n                  {/* Due date and overdue logic */}\r\n                  <div className=\"text-calm5 text-sm\">{/* was text-xs, now text-sm */\r\n                    `Due: ${task.dueDate ? new Date(task.dueDate).toLocaleDateString() : 'N/A'}`\r\n                  }</div>\r\n                  {task.dueDate && new Date(task.dueDate) < new Date() && (\r\n                    <span className=\"ml-2 font-semibold text-[#c0392b] text-sm\">\r\n                      (Overdue by {Math.ceil((new Date() - new Date(task.dueDate)) / (1000 * 60 * 60 * 24))} day{Math.ceil((new Date() - new Date(task.dueDate)) / (1000 * 60 * 60 * 24)) > 1 ? 's' : ''})\r\n                    </span>\r\n                  )}\r\n                  {task.dueDate && new Date(task.dueDate) >= new Date() && (\r\n                    <span className=\"ml-2 font-semibold text-[#27ae60] text-sm\">\r\n                      ({Math.ceil((new Date(task.dueDate) - new Date()) / (1000 * 60 * 60 * 24))} day{Math.ceil((new Date(task.dueDate) - new Date()) / (1000 * 60 * 60 * 24)) > 1 ? 's' : ''} left)\r\n                    </span>\r\n                  )}\r\n                  {/* Status logic: show 'Timed Out' if overdue, with color */}\r\n                  <div className=\"text-sm mt-1\">\r\n                    Priority: <span className=\"font-semibold\">{task.priority}</span> | Status: <span className={(() => {\r\n                      if (task.dueDate && new Date(task.dueDate) < new Date()) return 'font-semibold text-[#c0392b]';\r\n                      if (task.status === 'Completed') return 'font-semibold text-[#27ae60]';\r\n                      if (task.status === 'In Progress') return 'font-semibold text-[#f39c12]';\r\n                      return 'font-semibold text-calm5';\r\n                    })()}>\r\n                      {task.dueDate && new Date(task.dueDate) < new Date() ? 'Timed Out' : task.status}\r\n                    </span>\r\n                  </div>\r\n                  {/* Only show Collaborators if there are any */}\r\n                  {(() => {\r\n                    let collabText = '';\r\n                    if (task.owner && task.owner.email === user.email) {\r\n                      collabText = (task.collaborators || [])\r\n                        .filter(c => c.user && c.user.email !== user.email)\r\n                        .map(c => c.user.email + (c.canEdit ? ' (can edit)' : ''))\r\n                        .join(', ');\r\n                    } else if (task.owner && task.owner.email) {\r\n                      collabText = task.owner.email;\r\n                    }\r\n                    if (collabText) {\r\n                      return (\r\n                        <div className=\"text-calm5 text-sm mt-1\">\r\n                          Collaborators: <span className=\"font-semibold\">{collabText}</span>\r\n                        </div>\r\n                      );\r\n                    }\r\n                    return null;\r\n                  })()}\r\n                </div>\r\n                <div className=\"flex flex-row gap-2\">\r\n                  <button onClick={() => handleEdit(task)} className=\"px-1 py-2 rounded bg-calm2 text-calm5 font-semibold hover:bg-calm3 transition text-sm\">\r\n                    Edit Mission\r\n                  </button>\r\n                  <button onClick={() => handleDelete(task._id)} className=\"px-1 py-2 rounded bg-red-500 text-white font-semibold hover:bg-red-400 transition text-sm\">\r\n                    Delete Mission\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}